<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Mypage">

	<!-- // 주문 내역 list -->
	<select id="order_list" resultType="order">
		select * from tbl_order
	</select>

	<!-- // 총 주문 건수 -->
	<select id="order_count" resultType="int">
		select count(order_no) from tbl_order
	</select>
	
	<!-- // 주문내역 list -->
	<select id="orderDetail_list" resultType="orderdetail">
		SELECT * FROM tbl_order_detail od 
		INNER JOIN tbl_order o ON od.order_no = o.order_no 
		WHERE o.order_no= #{order_no}
	</select>
	
	<!-- // 찜목록 -->
	<select id="likeP_list" resultType="like">
        <!-- SELECT l.like_no, l.user_id, l.product_no, p.product_title, p.product_price, p.product_date
        FROM tbl_like l
        INNER JOIN tbl_product p ON l.product_no = p.product_no
        WHERE l.user_id = #{user_id, jdbcType=VARCHAR} -->
        select * from tbl_like
	</select>
	
	<!-- // 장바구니 목록 조회 -->
	<select id="cart_list" resultType="cart" >
		select * from tbl_cart where cart_mem_id = #{cart_mem_id}
	</select>
	
	<!-- // 배송지 리스트 조회 -->
	<select id="memAddr_list" resultType="member">
		select * from tbl_member where user_id = #{user_id}
	</select>
	
	<!-- //배송지 추가 -->
	<insert id="addr_in" >
		insert into tbl_addr (addr_no,user_id,postCode, roadAddr, detailAddr,addr_name) 
		values (addr_no_seq.nextval, #{user_id}, #{postCode}, #{roadAddr},#{detailAddr}, #{addr_name})
	</insert>
	
	<!-- //배송지 추가 리스트 조회 -->
	<select id="addr_list" resultType="addr">
		select * from tbl_addr where user_id = #{user_id}
	</select>
	
	<!-- //장바구니 삭제 -->
	<delete id="cart_del">
		delete from tbl_cart where cart_no=#{cart_no}
	</delete>
	
	<!-- //장바구니 전체삭제 -->
	<delete id="cart_delall">
		delete from tbl_cart where cart_mem_id=#{cart_mem_id}
	</delete>	
	
	<!-- //추가배송지 수정조회 -->
	<select id="selectOneAddr" resultType="addr">
		select * from tbl_addr where addr_no=#{addr_no}
	</select>	
	
	<!-- //추가배송지 수정 -->
	<update id="updateAddr">
		update tbl_addr set addr_name=#{addr_name}, postCode=#{postCode},
		 roadAddr=#{roadAddr}, detailAddr=#{detailAddr} where addr_no=#{addr_no}
	</update>	
	
	<!-- //추가 배송지 삭제 -->
	<delete id="deleteAddr">
		delete from tbl_addr where addr_no=#{addr_no}
	</delete>
	
</mapper>

